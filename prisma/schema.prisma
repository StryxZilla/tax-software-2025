// Prisma 7 schema - datasource URL is in prisma.config.ts

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
}

model User {
  id           String      @id @default(cuid())
  email        String      @unique
  name         String?
  passwordHash String
  isAdmin      Boolean     @default(false)
  createdAt    DateTime    @default(now())
  taxReturns   TaxReturn[]
}

model TaxReturn {
  id        String   @id @default(cuid())
  userId    String
  year      Int      @default(2025)
  data      String   // JSON stored as text
  updatedAt DateTime @updatedAt
  createdAt DateTime @default(now())
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([userId, year])
}
